(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{116:function(e,t,a){e.exports=a(190)},121:function(e,t,a){},150:function(e,t){},153:function(e,t,a){},175:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},189:function(e,t,a){},190:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(9),c=a.n(r),l=(a(121),a(26)),i=a(193),s=a(95),u=a.n(s),m=a(68),d=a.n(m),f=a(96),b=a.n(f),g=function(){return b()("https://socketchess.onrender.com")},p=o.a.createContext(null),h=g,v=o.a.createContext(null),E=a(194),j=a(39),y=(a(153),null),I=function(){var e=Object(n.useContext)(p),t=Object(n.useContext)(v),a=t.gameInfo,r=(t.setGameInfo,t.setGameStarted,Object(n.useState)(a.board)),c=Object(l.a)(r,2),i=c[0],s=c[1],m=Object(n.useState)(""),f=Object(l.a)(m,2),b=f[0],g=f[1],h=function(){var e=y.turn();switch(e){case"w":e="white";break;case"b":e="black";break;default:e="white"}return e};Object(n.useEffect)((function(){y="start"===a.board?new d.a:new d.a(a.board),h()===a.playerColor?g("It's your turn"):g("It's your opponent's turn"),e.on("move",(function(e){y.move(e),s(y.fen()),g("It's your turn")}))}),[]),Object(n.useEffect)((function(){y.game_over()&&g("Game over!")}));return o.a.createElement("div",{className:"chessboard-container"},o.a.createElement("h3",{className:"notification"},b),o.a.createElement("p",null,"You play the ",a.playerColor," pieces"),o.a.createElement("div",null,o.a.createElement(E.a,{title:"Are you sure?",okText:"Yes",cancelText:"No",onConfirm:function(){e.emit("resignFromTheGame",a)}},o.a.createElement(j.a,{danger:!0,className:"resign-button"},"Resign")),o.a.createElement(u.a,{onDrop:function(t){t.piece;var n=t.sourceSquare,o=t.targetSquare,r=y.move({from:n,to:o,promotion:"q"});null!==r&&(e.emit("move",{move:r,gameInfo:a,board:y.fen()}),s(y.fen()),g("It's your opponent's turn"))},allowDrag:function(e){var t=e.piece;return h()===a.playerColor&&t[0]===a.playerColor[0]&&!0!==y.game_over()},position:i,orientation:a.playerColor,className:"chessboard",calcWidth:function(e){var t=e.screenWidth;return console.log("screenWidth: ".concat(t)),.75*t>500?500:.9*t},darkSquareStyle:{backgroundColor:"#855E42"},lightSquareStyle:{backgroundColor:"#f7f7f7"}})))},O=a(29),C=a(196),k=a(197),S=a(192),w=(a(175),function(){var e=Object(n.useContext)(p),t=Object(n.useState)(""),a=Object(l.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(!1),s=Object(l.a)(i,2),u=s[0],m=s[1],d=Object(n.useContext)(v),f=d.gameInfo,b=d.setGameInfo;Object(n.useEffect)((function(){m(!1),e.on("joinError",(function(e){alert(e),b(Object(O.a)(Object(O.a)({},f),{},{id:""})),m(!1)}))}),[]);return o.a.createElement("div",{className:"join"},o.a.createElement(C.a,null,o.a.createElement(k.a,{span:14},o.a.createElement(S.a,{placeholder:"Code",onChange:function(e){c(e.target.value.toUpperCase())},value:r,size:"large",className:"join-input",maxlength:"6"})),o.a.createElement(k.a,{span:10},o.a.createElement(j.a,{type:"primary",size:"large",onClick:function(){m(!0),e.emit("joinGame",{gameId:r,userId:localStorage.getItem("userId")}),b(Object(O.a)(Object(O.a)({},f),{},{id:r}))},id:"join-button",loading:u},"Join Game"))))}),G=(a(187),function(){var e=Object(n.useContext)(p),t=Object(n.useContext)(v),a=t.gameInfo,r=t.setGameInfo;return a.id.length>0?o.a.createElement("p",null,"Share this code with your friend: ",a.id):o.a.createElement(j.a,{type:"primary",onClick:function(){var t=function(){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",t="",a=0;a<6;a++)t+=e[Math.round(Math.random()*(e.length-1))];return t}();e.emit("createGame",{gameId:t,userId:localStorage.getItem("userId")}),r(Object(O.a)(Object(O.a)({},a),{},{id:t,playerColor:"white"}))},size:"large",block:!0,id:"create-button"},"Create Game")}),N=(a(188),function(){return o.a.createElement("div",{className:"lobby"},o.a.createElement("h2",{className:"title"},"Multiplayer Chess \u265f"),o.a.createElement("div",{className:"game-menu"},o.a.createElement(G,null),o.a.createElement(w,null)))}),x=(a(189),function(){var e=Object(n.useContext)(p),t=Object(n.useState)(!1),a=Object(l.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)({id:"",playerColor:"black",board:"start"}),u=Object(l.a)(s,2),m=u[0],d=u[1];return Object(n.useEffect)((function(){null===localStorage.getItem("userId")&&localStorage.setItem("userId",Object(i.a)()),e.on("startGame",(function(e){var t=localStorage.getItem("userId");console.log(e),d({id:e.id,playerColor:e.players[t],board:e.board}),c(!0)})),e.on("endGame",(function(){console.log("game ended"),c(!1),d({id:"",playerColor:"black",board:"start"})}))}),[]),r?o.a.createElement("div",{className:"App"},o.a.createElement(v.Provider,{value:{gameInfo:m,setGameInfo:d,setGameStarted:c}},o.a.createElement(I,null),o.a.createElement("p",{className:"made-by"},"Made by"," ",o.a.createElement("a",{href:"https://andreiushakov.com",target:"_blank"},"Andrei Ushakov")))):o.a.createElement("div",{className:"App"},o.a.createElement(v.Provider,{value:{gameInfo:m,setGameInfo:d}},o.a.createElement(N,null),o.a.createElement("p",{className:"made-by"},"Made by"," ",o.a.createElement("a",{href:"https://andreiushakov.com",target:"_blank"},"Andrei Ushakov"))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)||"0.0.0.0"==window.location.host);c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(p.Provider,{value:h()},o.a.createElement(x,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[116,1,2]]]);
//# sourceMappingURL=main.dd58000d.chunk.js.map